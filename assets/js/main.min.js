const theme_storage_key="theme";class themePicker{constructor(){this.isOpen=!1,this.activeTheme="default-theme",this.hasLocalStorage="undefined"!=typeof Storage,this.hasThemeColorMeta=!!document.querySelector('meta[name="theme-color"]')&&window.metaColor,this.picassoEngine=document.querySelector(".js-navigation-picasso"),this.toggleBtn=document.querySelector(".js-navbar-picasso-toggle"),this.themeSelectBtns=Array.from(document.querySelectorAll(".js-picasso-item-select")),this.init()}init(){const e=this.getSystemPreference(),t=this.getStoredPreference();t?this.activeTheme=t:e&&(this.activeTheme=e),this.setActiveItem(),this.bindEvents()}bindEvents(){this.toggleBtn.addEventListener("click",()=>this.togglePicker()),this.themeSelectBtns.forEach(e=>{const t=e.dataset.theme;t&&e.addEventListener("click",()=>this.setTheme(t))})}getSystemPreference(){return!!window.matchMedia("(prefers-color-scheme: dark)").matches&&"dark-theme"}getStoredPreference(){return!!this.hasLocalStorage&&localStorage.getItem(theme_storage_key)}setActiveItem(){this.themeSelectBtns.forEach(e=>{e.classList.remove("is-active"),e.removeAttribute("aria-checked"),e.dataset.theme===this.activeTheme&&(e.classList.add("is-active"),e.setAttribute("aria-checked","true"))})}setTheme(e){this.activeTheme=e,document.documentElement.setAttribute("data-theme",e),this.hasLocalStorage&&localStorage.setItem(theme_storage_key,e),this.setActiveItem()}togglePicker(e){this.isOpen="boolean"==typeof e?e:!this.isOpen,this.toggleBtn.setAttribute("aria-expanded",String(this.isOpen)),this.isOpen?(this.picassoEngine.removeAttribute("hidden"),window.setTimeout(()=>{this.picassoEngine.classList.add("is-open")},1),this.themeSelectBtns[0].focus()):(this.picassoEngine.classList.remove("is-open"),this.toggleBtn.focus())}}window.CSS&&CSS.supports("color","var(--fake-var)")&&new themePicker;